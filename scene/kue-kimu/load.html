<div class="loading-screen">
    <h2>Memuat cerita Kue Kimu...</h2>
    <progress id="loading-progress" max="9" value="0"></progress>
</div>

<script>
    function preloadImages(urls, onProgress, onComplete) {
        let loaded = 0;
        const total = urls.length;
        
        urls.forEach(url => {
            const img = new Image();
            img.onload = img.onerror = () => {
                loaded++;
                if (onProgress) onProgress(loaded, total);
                if (loaded === total && onComplete) onComplete();
            };
            img.src = url;
        });
    }
    
    window.addEventListener('load', () => {
        
        console.log('Window loaded, starting preload...');
        const progressBar = document.getElementById('loading-progress');
        
        const images = [];
        for (let i = 1; i <= 9; i++) {
            images.push(`assets/story/kue-kimu/p${i}.jpg`);
        }
        
        preloadImages(images, (loaded, total) => {
            console.log(`Loaded ${loaded} of ${total}`);
            if (progressBar) progressBar.value = loaded;
        }, () => {
            console.log("All images loaded!");
            loadSceneTrans('kue-kimu/p1', 'footer', 'slide-left');
        });
    });
</script>