<link rel="stylesheet" href="scene/a3-quiz/load.css">
<section class="scene-bg ingame">
    <div class="lay flex column justify-center items-center gap-12">
        <div class="out-top flex column justify-center items-center gap-7">
            <div class="hint">Lengkapi kata berikut ini.</div>
            <div class="question flex column">
                <span class="inline">Siapa yang membantu <span class="m-char">Kimu</span> ketika membuat kue <span class="m-thing">bingka pisang</span>?</span>
            </div>
        </div>
        <div class="syllable-split flex column gap-4 full justify-center items-center">
            <div class="final-answer flex row">
                <button id="btn-answer" class="act-answer medium locked" data-btn-group="soal-a3-p2">KA</button>
            </div>
            <div class="separator-12 vertical full border-color-slate-300"></div>
            <div class="answer-choices flex row">
                <button id="btn-answer" class="act-answer medium" data-btn-group="soal-a3-p2">KAK</button>
                <button id="btn-answer" class="act-answer medium" data-btn-group="soal-a3-p2">KI</button>
                <button id="btn-answer" class="act-answer medium" data-btn-group="soal-a3-p2">KU</button>
                <button id="btn-answer" class="act-answer medium" data-btn-group="soal-a3-p2">KE</button>
            </div>
        </div>
    </div>
</section>
<script>

    loadHeader('activity-3');
    loadFooter('activity-3');

    setTimeout(() => {
        const buttons = {
            action: document.getElementById('btn-action'),
        };

        const checks = {
            action: () => { }
        };

        const actions = {
            action: () => {
                const isCorrect = checkAnswer("soal-a3-p2", [
                    "KAKAK",
                ]);
                const title = isCorrect
                    ? "Tepat!"
                    : "Salah...";
                const message = isCorrect
                    ? "Selera kalian boleh juga!"
                    : "Sepertinya itu kurang tepat.";

                showFeedbackSheet(isCorrect, title, message, () => {
                    loadSceneTrans('a3-quiz/p2', 'none', 'slide-left');
                    progressIncrease();
                });
            },
        };

        for (const key in buttons) {
            if (buttons[key]) {
                checks[key]();
                buttons[key].onclick = actions[key];
            }
        }

        const allButtons = document.querySelectorAll('#btn-answer');

        allButtons.forEach(button => {
            button.addEventListener('click', () => {
                const group = button.dataset.btnGroup;

                document.querySelectorAll(`#btn-answer[data-btn-group="${group}"]`)
                    .forEach(btn => btn.classList.remove('selected'));

                soundman.play('click');

                button.classList.add('selected');

                const selectedValue = button.textContent.trim();
                console.log(`Selected answer for ${group}: ${selectedValue}`);

                window.selectedAnswers = window.selectedAnswers || {};
                window.selectedAnswers[group] = selectedValue;

                const btnAction = document.getElementById('btn-action');
                if (window.selectedAnswers[group]) {
                    btnAction.classList.remove('disabled');
                } else {
                    btnAction.classList.add('disabled');
                }

            });
        });

    }, 450);

    applyInputBlocker(1200);

    initSyllableSplit(1);

</script>