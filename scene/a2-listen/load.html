<section class="flex column justify-center items-center height-100 gap-10">
    <div class="loading-screen">
        <h2>Memuat cerita Kue Kimu...</h2>
        <progress id="loading-progress" max="9" value="0"></progress>
    </div>
</section>
<script>
    function preloadImages(urls, onProgress, onComplete) {
        let loaded = 0;
        const total = urls.length;

        urls.forEach(url => {
            const img = new Image();
            img.onload = img.onerror = () => {
                loaded++;
                if (onProgress) onProgress(loaded, total);
                if (loaded === total && onComplete) onComplete();
            };
            img.src = url;
        });
    }

    var progressBar = document.getElementById('loading-progress');

    var images = [];
    for (let i = 1; i <= 9; i++) {
        images.push(`scene/a2-listen/img/p${i}.jpg`);
    }

    preloadImages(images, (loaded, total) => {
            if (progressBar) progressBar.value = loaded;
        }, () => {
            console.log("Semua gambar sudah preload, siap lanjut!");

            // Hapus loading screen supaya gak terlihat lagi
            const loadingScreen = document.querySelector('.loading-screen');
            if (loadingScreen) loadingScreen.remove();

            loadSceneTrans('a2-listen/p0', 'both', 'fade');
        });

</script>